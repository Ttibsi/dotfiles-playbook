---

- name: Download wallpaper
  get_url:
    url: "{{ wallpaper_url }}"
    dest: "{{ home_dir }}/Workspace/wallpaper.jpg"

# Apparently it's better to overwrite standard i3 to avoid errors
- name: Install i3
  apt:
    name: i3
  become: true

- name: Add regolith linux PPA
  apt_repository:
    repo: "ppa:regolith-linux/release"
  become: true

- name: Install i3-gaps
  apt:
    name: i3-gaps
  become: true

- name: Distribute i3 config
  copy:
    src: templates/i3-config/config
    dest: "{{ home_dir }}/.config/i3/"

# For managing wallpapers in i3/config
- name: Install feh
  apt:
    name: feh
  become: true

- name: Intall Rofi searchbar
  apt:
    name: rofi
  become: true

- name: Distribute Rofi config
  copy:
    src: templates/i3-config/rofi-config/
    dest: "{{ home_dir }}/.config/rofi"

- name: Install polybar
  apt:
    name: polybar
  become: true

#- name: Distribute polybar config

# Fpr brightness control
- name: Install light
  apt:
    name: light
  become: true

- name: Give light perms to manage screen brightness
  file:
    path: /usr/bin/light
    mode: +s
  become: true

# TESTS
# relog into i3-gaps
# Does the wallpaper appear?
# Can you launch the rofi searchbar
